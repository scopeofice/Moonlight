<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Moonlight</title>
    <link rel="stylesheet" type="text/css" href="CSS/style.css">
    <link rel="stylesheet" type="text/css" href="CSS/login.css">
    
</head>
<body style="background-image: url('Images/Sky.png');">

    <header id="header">
        <div class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="white" id="svg" class="bi bi-moon-stars-fill" viewBox="0 0 16 16">
                <path
                d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"
              />
              <path
                d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"
              />
            </svg>
            <a href="#" style="text-decoration: none;">Moonlight</a>
        </div>
        <div class="menu-toggle">
            <a href="#" id="menulist" style="text-decoration: none;">Menu</a>
        </div>
          <ul class="menu" style="margin-right: 10px;">
            <button id="closeMenu">X</button>
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="login.html">Login</a></li>
            <li><a href="#">About us</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
    </header>

    <section>
        <div class="wrapper">
            <div class="title">
                Login Form
            </div>
            <form id="loginForm" action="/login" method="POST">
                <div class="field">
                    <input type="text" id="email" required>
                    <label>Email Address</label>
                </div>
                <div class="field">
                    <input type="password" id="password" required>
                    <label>Password</label>
                </div>
                <div class="content">
                    <div class="checkbox">
                        <input type="checkbox" id="remember-me">
                        <label for="remember-me">Remember me</label>
                    </div>
                    <div class="pass-link">
                        <a href="#">Forgot password?</a>
                    </div>
                </div>
                <div class="field">
                    <input type="submit" value="Login">
                </div>
                <div class="signup-link">
                    Not a member? <a href="signup.html">Signup now</a>
                </div>
            </form>
        </div>
    </section>
    <footer class="footer">
        <div class="waves">
          <div class="wave" id="wave1"></div>
          <div class="wave" id="wave2"></div>
          <div class="wave" id="wave3"></div>
          <div class="wave" id="wave4"></div>
        </div>
        <ul class="social-icon">
          <li class="social-icon__item"><a class="social-icon__link" href="#">
              <ion-icon name="logo-facebook"></ion-icon>
            </a></li>
          <li class="social-icon__item"><a class="social-icon__link" href="#">
              <ion-icon name="logo-twitter"></ion-icon>
            </a></li>
          <li class="social-icon__item"><a class="social-icon__link" href="#">
              <ion-icon name="logo-linkedin"></ion-icon>
            </a></li>
          <li class="social-icon__item"><a class="social-icon__link" href="#">
              <ion-icon name="logo-instagram"></ion-icon>
            </a></li>
        </ul>
        <p>&copy;2023 Scopeofice | All Rights Reserved</p>
      </footer>
      <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
      <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <script>
         document.addEventListener("DOMContentLoaded", function () {
  const navList = document.querySelector("header ul");
  const menuToggle = document.querySelector(".menu-toggle");
  
  menuToggle.addEventListener("click", function () {
    navList.classList.toggle("active");
  });

  const closeMenuButton = document.getElementById("closeMenu");
  closeMenuButton.addEventListener("click", function () {
    navList.classList.remove("active");
  });

  // Select all list items
  const listItems = document.querySelectorAll(".menu li");

  // Add a click event listener to each list item
  listItems.forEach(function (item) {
    item.addEventListener("click", function () {
      // Remove the "active" class from all list items
      listItems.forEach(function (li) {
        li.classList.remove("active");
      });

      // Add the "active" class to the clicked list item
      item.classList.add("active");
    });
  });
});
document.addEventListener("DOMContentLoaded", function () {
    const loginForm = document.getElementById("loginForm");

    loginForm.addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent the default form submission

        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        // Create an object to hold the user's credentials
        const credentials = {
            email: email,
            password: password
        };

        // Send a POST request to your server for authentication
        fetch("http://localhost:3002/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(credentials)
        })
        .then(response => {
            if (response.status === 200) {
                // Authentication successful
                return response.json();
            } else if (response.status === 401) {
                // Invalid credentials
                throw new Error("Invalid credentials");
            } else {
                throw new Error("Login failed");
            }
        })
        .then(data => {
            // Redirect the user to their homepage with user data
            // window.location.href = "/user.html";
            // alert(data.user.full_name);
            // window.location.href = `/user.html?fullName=${data.user.full_name}`;
            const fullName = data.user.full_name;
            localStorage.setItem("fullName", fullName);
            window.location.href = "/user.html";
        })
        .catch(error => {
            console.error("Login error: " + error.message);
            // Handle login error (e.g., display an error message)
        });
    });
});

    </script>
</body>
</html>
